http:
  routers:
    # ---------------------------------------------------------
    # SOLO IP: Plataforma completa (login, admin, panel)
    # ---------------------------------------------------------
    platform-frontend:
      entryPoints:
        - websecure
      rule: Host(`161.97.169.31`)
      service: frontend@docker

    platform-api:
      entryPoints:
        - websecure
      rule: Host(`161.97.169.31`) && (PathPrefix(`/api`) || PathPrefix(`/storage`))
      service: api@docker

    # ---------------------------------------------------------
    # DOMINIOS DE BODAS: Frontend público + API pública + storage
    # Para agregar: || Host(`nuevodominio.com`)
    # ---------------------------------------------------------
    
    bodas-frontend:
      entryPoints:
        - websecure
      rule: (Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`))
      service: frontend@docker
      tls:
        certResolver: le

    bodas-api-public:
      entryPoints:
        - websecure
      rule: (Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`)) && PathPrefix(`/api/public`)
      service: api@docker
      tls:
        certResolver: le

    bodas-storage:
      entryPoints:
        - websecure
      rule: (Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`)) && PathPrefix(`/storage`)
      service: api@docker
      tls:
        certResolver: le

tls:
  options:
    default:
      minVersion: VersionTLS12
