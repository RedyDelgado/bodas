http:
  routers:
    # ---------------------------------------------------------
    # SOLO IP: Plataforma completa (login, admin, panel)
    # ---------------------------------------------------------
    platform-frontend:
      entryPoints:
        - websecure
      rule: Host(`161.97.169.31`)
      service: frontend@docker
      tls:
        certResolver: le

    platform-api:
      entryPoints:
        - websecure
      rule: Host(`161.97.169.31`) && (PathPrefix(`/api`) || PathPrefix(`/storage`))
      service: api@docker
      tls:
        certResolver: le

    # ---------------------------------------------------------
    # DOMINIOS DE BODAS: Solo página pública de la boda
    # Para agregar: || Host(`nuevodominio.com`)
    # Nota: /api/public/* retorna datos de esa boda por dominio
    # ---------------------------------------------------------
    bodas-frontend:
      entryPoints:
        - websecure
      rule: Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`)
      service: frontend@docker
      tls:
        certResolver: le

    bodas-api-public:
      entryPoints:
        - websecure
      rule: (Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`)) && PathPrefix(`/api/public`)
      service: api@docker
      tls:
        certResolver: le

    bodas-storage:
      entryPoints:
        - websecure
      rule: (Host(`redyypatricia.com`) || Host(`www.redyypatricia.com`)) && PathPrefix(`/storage`)
      service: api@docker
      tls:
        certResolver: le

tls:
  options:
    default:
      minVersion: VersionTLS12
